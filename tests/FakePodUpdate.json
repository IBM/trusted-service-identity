{
   "kind": "Pod",
   "apiVersion": "v1",
   "metadata": {
       "name": "myubuntu-6d5c486b66-94czv",
       "generateName": "myubuntu-6d5c486b66-",
       "namespace": "test",
       "uid": "d3eb08a1-a23e-495a-9b09-2fe6081c4f52",
       "resourceVersion": "448574",
       "creationTimestamp": "2020-12-02T20:52:12Z",
       "labels": {
           "app": "myubuntu",
           "pod-template-hash": "6d5c486b66"
       },
       "annotations": {
           "admission.trusted.identity/inject": "true",
           "admission.trusted.identity/status": "mutated",
           "admission.trusted.identity/tsi-cluster-name": "minikube",
           "admission.trusted.identity/tsi-images": "ubuntu@sha256:250cc6f3f3ffc5cdaa9d8f4946ac79821aafb4d3afc93928f0de9336eba21aa4",
           "admission.trusted.identity/tsi-region": "eu-de",
           "tsi.secrets": "- tsi.secret/name: \"mysecret1xxx\"\n  tsi.secret/constraints: \"region,images\"\n  tsi.secret/local-path: \"tsi-secrets/\"\n- tsi.secret/name: \"mysecret2\"\n  tsi.secret/constraints: \"region\"\n  tsi.secret/local-path: \"tsi-secrets\"\n"
       },
       "ownerReferences": [
           {
               "apiVersion": "apps/v1",
               "kind": "ReplicaSet",
               "name": "myubuntu-6d5c486b66",
               "uid": "6125da71-2a07-4df8-ad3f-305c295d2c20",
               "controller": true,
               "blockOwnerDeletion": true
           }
       ]
   },
   "spec": {
       "volumes": [
           {
               "name": "default-token-ncgzw",
               "secret": {
                   "secretName": "default-token-ncgzw",
                   "defaultMode": 420
               }
           },
           {
               "name": "tsi-secrets",
               "emptyDir": {}
           },
           {
               "name": "tsi-sockets",
               "hostPath": {
                   "path": "/var/tsi-secure/sockets",
                   "type": "Directory"
               }
           },
           {
               "name": "host-machineid",
               "hostPath": {
                   "path": "/etc/machine-id",
                   "type": "File"
               }
           },
           {
               "name": "pod-metadata",
               "downwardAPI": {
                   "items": [
                       {
                           "path": "tsi-secrets",
                           "fieldRef": {
                               "apiVersion": "v1",
                               "fieldPath": "metadata.annotations['tsi.secrets']"
                           }
                       },
                       {
                           "path": "tsi-identities",
                           "fieldRef": {
                               "apiVersion": "v1",
                               "fieldPath": "metadata.annotations['tsi.identities']"
                           }
                       },
                       {
                           "path": "ti-identity",
                           "fieldRef": {
                               "apiVersion": "v1",
                               "fieldPath": "metadata.annotations['admission.trusted.identity/ti-identity']"
                           }
                       },
                       {
                           "path": "ti-pod-name",
                           "fieldRef": {
                               "apiVersion": "v1",
                               "fieldPath": "metadata.name"
                           }
                       },
                       {
                           "path": "ti-pod-namespace",
                           "fieldRef": {
                               "apiVersion": "v1",
                               "fieldPath": "metadata.namespace"
                           }
                       },
                       {
                           "path": "tsi-images",
                           "fieldRef": {
                               "apiVersion": "v1",
                               "fieldPath": "metadata.annotations['admission.trusted.identity/tsi-images']"
                           }
                       },
                       {
                           "path": "tsi-cluster-name",
                           "fieldRef": {
                               "apiVersion": "v1",
                               "fieldPath": "metadata.annotations['admission.trusted.identity/tsi-cluster-name']"
                           }
                       },
                       {
                           "path": "tsi-region",
                           "fieldRef": {
                               "apiVersion": "v1",
                               "fieldPath": "metadata.annotations['admission.trusted.identity/tsi-region']"
                           }
                       }
                   ],
                   "defaultMode": 420
               }
           }
       ],
       "initContainers": [
           {
               "name": "jwt-init",
               "image": "trustedseriviceidentity/ti-jwt-sidecar:v1.8.3",
               "env": [
                   {
                       "name": "HOST_IP",
                       "valueFrom": {
                           "fieldRef": {
                               "apiVersion": "v1",
                               "fieldPath": "status.hostIP"
                           }
                       }
                   },
                   {
                       "name": "IS_SIDECAR",
                       "value": "false"
                   },
                   {
                       "name": "JWT_TTL_SEC",
                       "value": "60"
                   },
                   {
                       "name": "VAULT_ADDR",
                       "value": "http://tsi-vault-v171.tsi-fra02-5240a919746a818fd9d58aa25c34ecfe-0000.eu-de.containers.appdomain.cloud"
                   },
                   {
                       "name": "SECRET_REFRESH_SEC",
                       "value": "600"
                   },
                   {
                       "name": "IDENTITY_REFRESH_SEC",
                       "value": "600"
                   }
               ],
               "resources": {},
               "volumeMounts": [
                   {
                       "name": "tsi-secrets",
                       "mountPath": "/usr/share/secrets/tsi-secrets"
                   },
                   {
                       "name": "tsi-sockets",
                       "mountPath": "/host/sockets"
                   },
                   {
                       "name": "pod-metadata",
                       "readOnly": true,
                       "mountPath": "/pod-metadata"
                   },
                   {
                       "name": "host-machineid",
                       "readOnly": true,
                       "mountPath": "/host/machineid"
                   },
                   {
                       "name": "default-token-ncgzw",
                       "readOnly": true,
                       "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount"
                   }
               ],
               "terminationMessagePath": "/dev/termination-log",
               "terminationMessagePolicy": "File",
               "imagePullPolicy": "Always",
               "securityContext": {
                   "runAsUser": 0
               }
           }
       ],
       "containers": [
           {
               "name": "myubuntu",
               "image": "ubuntu@sha256:250cc6f3f3ffc5cdaa9d8f4946ac79821aafb4d3afc93928f0de9336eba21aa4",
               "command": [
                   "/bin/bash",
                   "-c",
                   "--"
               ],
               "args": [
                   "while true; do ls /tsi-secrets; sleep 15; done;"
               ],
               "resources": {},
               "volumeMounts": [
                   {
                       "name": "default-token-ncgzw",
                       "readOnly": true,
                       "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount"
                   },
                   {
                       "name": "tsi-secrets",
                       "readOnly": true,
                       "mountPath": "/tsi-secrets"
                   }
               ],
               "terminationMessagePath": "/dev/termination-log",
               "terminationMessagePolicy": "File",
               "imagePullPolicy": "Always"
           },
           {
               "name": "jwt-sidecar",
               "image": "trustedseriviceidentity/ti-jwt-sidecar:v1.8.3",
               "env": [
                   {
                       "name": "HOST_IP",
                       "valueFrom": {
                           "fieldRef": {
                               "apiVersion": "v1",
                               "fieldPath": "status.hostIP"
                           }
                       }
                   },
                   {
                       "name": "IS_SIDECAR",
                       "value": "true"
                   },
                   {
                       "name": "JWT_TTL_SEC",
                       "value": "60"
                   },
                   {
                       "name": "VAULT_ADDR",
                       "value": "http://tsi-vault-v171.tsi-fra02-5240a919746a818fd9d58aa25c34ecfe-0000.eu-de.containers.appdomain.cloud"
                   },
                   {
                       "name": "SECRET_REFRESH_SEC",
                       "value": "600"
                   },
                   {
                       "name": "IDENTITY_REFRESH_SEC"
                   }
               ],
               "resources": {},
               "volumeMounts": [
                   {
                       "name": "tsi-secrets",
                       "mountPath": "/usr/share/secrets/tsi-secrets"
                   },
                   {
                       "name": "tsi-sockets",
                       "mountPath": "/host/sockets"
                   },
                   {
                       "name": "pod-metadata",
                       "readOnly": true,
                       "mountPath": "/pod-metadata"
                   },
                   {
                       "name": "host-machineid",
                       "readOnly": true,
                       "mountPath": "/host/machineid"
                   },
                   {
                       "name": "default-token-ncgzw",
                       "readOnly": true,
                       "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount"
                   }
               ],
               "terminationMessagePath": "/dev/termination-log",
               "terminationMessagePolicy": "File",
               "imagePullPolicy": "Always",
               "securityContext": {
                   "runAsUser": 0
               }
           }
       ],
       "restartPolicy": "Always",
       "terminationGracePeriodSeconds": 30,
       "dnsPolicy": "ClusterFirst",
       "serviceAccountName": "default",
       "serviceAccount": "default",
       "nodeName": "minikube",
       "securityContext": {},
       "schedulerName": "default-scheduler",
       "tolerations": [
           {
               "key": "node.kubernetes.io/not-ready",
               "operator": "Exists",
               "effect": "NoExecute",
               "tolerationSeconds": 300
           },
           {
               "key": "node.kubernetes.io/unreachable",
               "operator": "Exists",
               "effect": "NoExecute",
               "tolerationSeconds": 300
           }
       ],
       "priority": 0
   },
   "status": {
       "phase": "Running",
       "conditions": [
           {
               "type": "Initialized",
               "status": "True",
               "lastProbeTime": null,
               "lastTransitionTime": "2020-12-02T20:52:40Z"
           },
           {
               "type": "Ready",
               "status": "True",
               "lastProbeTime": null,
               "lastTransitionTime": "2020-12-02T20:52:44Z"
           },
           {
               "type": "ContainersReady",
               "status": "True",
               "lastProbeTime": null,
               "lastTransitionTime": "2020-12-02T20:52:44Z"
           },
           {
               "type": "PodScheduled",
               "status": "True",
               "lastProbeTime": null,
               "lastTransitionTime": "2020-12-02T20:52:12Z"
           }
       ],
       "hostIP": "172.17.0.2",
       "podIP": "172.18.0.4",
       "startTime": "2020-12-02T20:52:12Z",
       "initContainerStatuses": [
           {
               "name": "jwt-init",
               "state": {
                   "terminated": {
                       "exitCode": 0,
                       "reason": "Completed",
                       "startedAt": "2020-12-02T20:52:15Z",
                       "finishedAt": "2020-12-02T20:52:40Z",
                       "containerID": "docker://071bd0e29db8740569464a3b113e2a95810679214b8b02b923ee1cfc1328116b"
                   }
               },
               "lastState": {},
               "ready": true,
               "restartCount": 0,
               "image": "trustedseriviceidentity/ti-jwt-sidecar:v1.8.3",
               "imageID": "docker-pullable://trustedseriviceidentity/ti-jwt-sidecar@sha256:c99941a4171d2dd08e6487aa92b23b3ddf3b695543ba78988a1e26a0679f1b3a",
               "containerID": "docker://071bd0e29db8740569464a3b113e2a95810679214b8b02b923ee1cfc1328116b"
           }
       ],
       "containerStatuses": [
           {
               "name": "jwt-sidecar",
               "state": {
                   "running": {
                       "startedAt": "2020-12-02T20:52:44Z"
                   }
               },
               "lastState": {},
               "ready": true,
               "restartCount": 0,
               "image": "trustedseriviceidentity/ti-jwt-sidecar:v1.8.3",
               "imageID": "docker-pullable://trustedseriviceidentity/ti-jwt-sidecar@sha256:c99941a4171d2dd08e6487aa92b23b3ddf3b695543ba78988a1e26a0679f1b3a",
               "containerID": "docker://b2e4b2ccd187c1bbe4c637ab72d241aec20e6b2f97b8f934543aeda454f7942b"
           },
           {
               "name": "myubuntu",
               "state": {
                   "running": {
                       "startedAt": "2020-12-02T20:52:42Z"
                   }
               },
               "lastState": {},
               "ready": true,
               "restartCount": 0,
               "image": "ubuntu@sha256:250cc6f3f3ffc5cdaa9d8f4946ac79821aafb4d3afc93928f0de9336eba21aa4",
               "imageID": "docker-pullable://ubuntu@sha256:250cc6f3f3ffc5cdaa9d8f4946ac79821aafb4d3afc93928f0de9336eba21aa4",
               "containerID": "docker://b19c2d264862d6645d70b9e6eaea7f36e9adf28ed77c2b151551803afe1776b7"
           }
       ],
       "qosClass": "BestEffort"
   }
}
